const{Sequelize:Sequelize}=require("sequelize"),wlogger=require("./logger");function handleSequelizeError(e,r,o){let t="";e instanceof Sequelize.ValidationError?(t="The system has found a problem with the information you provided. Please check the information and try again.\n",e.errors.forEach((e=>{t+=`- ${e.path}: ${e.message}`})),r.status(500).json({error:`${t}`}),t=`${o}: Validation errors: ${t}`):e instanceof Sequelize.UniqueConstraintError?(t="The system has found a problem with the information you provided. Please check the information and try again.\n",e.errors.forEach((e=>{t+=`- ${e.path}: ${e.message}`})),r.status(500).json({error:`${t}`}),t=`${o}: Unique constraint errors: ${t}`):e instanceof Sequelize.ForeignKeyConstraintError?(t="The system has found a problem with the information you provided. Please check the information and try again.\n"+e,r.status(500).json({error:`${t}`}),t=`${o}: Foreign key constraint errors: ${t}`):e instanceof Sequelize.DatabaseError?(r.status(500).json({error:"There's an issue with the system that keeps track of information."}),t=`${o}: Database error => ${e}`):e instanceof Sequelize.ConnectionError?(r.status(500).json({error:"There's an issue with the system that keeps track of information."}),t=`${o}: Database connection error => ${e}`):e instanceof Sequelize.TimeoutError?(r.status(500).json({error:"There's an issue with the system that keeps track of information."}),t=`${o}: Database timeout error => ${e}`):(r.status(500).json({error:`${e}`}),t=`${o}: Error: ${e}`),wlogger.error(t)}module.exports={handleSequelizeError:handleSequelizeError};
